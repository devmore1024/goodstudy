# D1 知识课堂

## 页面信息
- **所属模块**：D-核心学习模块
- **页面类型**：全屏页
- **数字人老师**：不显示
- **支持模式**：学生
- **路由**：`/knowledge`

## 线框图

### 默认状态

```
┌──────────────────────────────────┐
│ ← 知识课堂                      │
├──────────────────────────────────┤
│ ┌────┐  ┌────┐  ┌────┐         │
│ │数学│  │语文│  │英语│         │
│ └────┘  └────┘  └────┘         │
│  ━━━━                           │
├──────────────────────────────────┤
│                                  │
│  第一章 · 分数的意义和性质       │
│                                  │
│ ┌──────────────┐ ┌─────────────┐│
│ │  📘           │ │  📘          ││
│ │  分数的意义   │ │  真分数和    ││
│ │               │ │  假分数      ││
│ │  ████░░ 80%  │ │  ████░ 60%  ││
│ │  2天前学习    │ │  3天前学习   ││
│ └──────────────┘ └─────────────┘│
│ ┌──────────────┐ ┌─────────────┐│
│ │  📘           │ │  📘          ││
│ │  分数的基本   │ │  分数大小    ││
│ │  性质         │ │  比较        ││
│ │  ████████100% │ │  ████░ 55%  ││
│ │  1天前学习    │ │  未学习      ││
│ └──────────────┘ └─────────────┘│
│                                  │
│  第二章 · 分数加减法             │
│                                  │
│ ┌──────────────┐ ┌─────────────┐│
│ │  📗           │ │  📗          ││
│ │  同分母加减法 │ │  异分母      ││
│ │               │ │  加减法      ││
│ │  ████░░ 70%  │ │  ███░░ 45%  ││
│ │  昨天学习     │ │  未学习      ││
│ └──────────────┘ └─────────────┘│
│                                  │
│              ...                 │
│                                  │
│  ┌─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┐  │
│    1   2   3  ···  下一页 →     │
│  └─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┘  │
│                                  │
└──────────────────────────────────┘
```

### 语文学科状态

```
┌──────────────────────────────────┐
│ ← 知识课堂                      │
├──────────────────────────────────┤
│ ┌────┐  ┌────┐  ┌────┐         │
│ │数学│  │语文│  │英语│         │
│ └────┘  └────┘  └────┘         │
│          ━━━━                    │
├──────────────────────────────────┤
│                                  │
│  第一单元 · 古诗词               │
│                                  │
│ ┌──────────────┐ ┌─────────────┐│
│ │  📕           │ │  📕          ││
│ │  春望         │ │  望岳        ││
│ │               │ │              ││
│ │  ████████100% │ │  ████░ 65%  ││
│ │  今天学习     │ │  3天前学习   ││
│ └──────────────┘ └─────────────┘│
│ ┌──────────────┐ ┌─────────────┐│
│ │  📕           │ │  📕          ││
│ │  静夜思       │ │  登鹳雀楼    ││
│ │               │ │              ││
│ │  ██████░ 75%  │ │  ░░░░░ 0%   ││
│ │  1周前学习    │ │  未学习      ││
│ └──────────────┘ └─────────────┘│
│                                  │
│  第二单元 · 阅读理解             │
│                                  │
│ ┌──────────────┐ ┌─────────────┐│
│ │  📕           │ │  📕          ││
│ │  记叙文阅读   │ │  说明文阅读  ││
│ │               │ │              ││
│ │  ████░░ 70%  │ │  ░░░░░ 0%   ││
│ │  5天前学习    │ │  未学习      ││
│ └──────────────┘ └─────────────┘│
│                                  │
│  ┌─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┐  │
│    1   2   3  ···  下一页 →     │
│  └─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┘  │
│                                  │
└──────────────────────────────────┘
```

## 元素说明

### 导航栏
| 元素 | 类型 | 说明 |
|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头，点击返回上一页 |
| 页面标题 | 文本 | "知识课堂"，字号18sp，加粗 |

### 学科Tab
| 元素 | 类型 | 说明 |
|------|------|------|
| 学科分段控件 | Tab切换 | 数学/语文/英语三科切换，当前选中项下方有主题色下划线高亮，字号14sp |

### 章节标题
| 元素 | 类型 | 说明 |
|------|------|------|
| 章节名称 | 文本 | "第X章 · 章节名"格式，字号16sp，加粗，灰色800。每个章节下方排列该章节的知识点卡片 |

### 知识点卡片
| 元素 | 类型 | 说明 |
|------|------|------|
| 卡片容器 | 卡片 | 2列网格布局，圆角16dp，白色背景，阴影elevation 2dp，内距12dp |
| 学科图标 | 图标 | 左上角书本emoji，数学📘、语文📕、英语📗，区分学科色彩 |
| 知识点名称 | 文本 | 字号14sp，加粗，最多2行，超出省略号截断 |
| 掌握度进度条 | 进度条 | 宽度撑满卡片，高度4dp，圆角。绿色(≥80%)、黄色(40%-79%)、灰色(<40%或未学习)，右侧百分比数值 |
| 学习时间 | 辅助文本 | 字号11sp，灰色400，显示"X天前学习"或"未学习" |

### 分页控件
| 元素 | 类型 | 说明 |
|------|------|------|
| 页码指示器 | 分页控件 | 底部居中，显示页码数字，当前页高亮为主题色圆形背景，非当前页为灰色文字 |
| 下一页按钮 | 文本按钮 | "下一页 →"，位于页码右侧，最后一页时隐藏 |

## 交互行为

### 手势交互
- **上下滚动**：垂直滚动浏览当前页的知识点卡片，学科Tab吸顶固定
- **左右滑动学科Tab**：切换数学/语文/英语，卡片内容刷新为对应学科
- **下拉刷新**：拉取最新知识点数据和掌握度信息

### 点击交互
- **点击知识点卡片**：跳转到D4知识点精讲页面，传入对应知识点ID
- **点击学科Tab**：切换学科，卡片内容更新为对应学科的知识点，分页重置到第1页
- **点击页码数字**：跳转到对应页
- **点击"下一页"**：加载并显示下一页知识点
- **点击返回按钮**：返回上一页（B1首页）

### 动画与反馈
- **学科切换动画**：卡片内容整体淡出淡入过渡，200ms
- **卡片点击反馈**：点击时轻微缩放（scale 0.97）+ 弹回效果，背景色短暂变浅
- **掌握度进度条**：首次加载时从0到实际值的填充动画，500ms
- **分页切换动画**：切换页码时卡片从下方淡入滑出，300ms
- **触觉反馈**：点击卡片触发轻微震动（haptic feedback）

### AI 老师交互
- 本页面不显示数字人老师

## 状态枚举

### 默认状态
- 默认显示数学学科，第1页
- 知识点按章节分组排列，每页显示一个完整章节或最多8个知识点卡片（以章节为单位分页）
- 掌握度进度条实时反映学习数据

### 空状态
- **整体无知识点**：场景为新用户未配置年级/教材，显示"请先设置你的年级和教材" + "去设置"按钮
- **某学科无内容**：切换到未配置的学科，显示"该学科暂未开放，敬请期待"

### 加载状态
- **首次加载**：学科Tab正常显示，卡片区域显示6个骨架屏卡片（2x3网格灰色脉冲动画）
- **学科切换**：卡片区域显示短暂加载动画（旋转图标），0.5秒内刷新
- **翻页加载**：卡片区域半透明遮罩 + 居中小型加载圆圈

### 错误状态
- **网络异常**：显示断网插图 + "网络不可用" + "重试"按钮
- **数据加载失败**：显示"加载失败" + "点击重试"

### 边界情况
- **掌握度实时更新**：从D4返回时，对应知识点的掌握度数据自动刷新
- **同名知识点**：不同章节的同名知识点，卡片附加章节名以区分
- **长知识点名称**：超过2行的名称以省略号截断
- **掌握度计算逻辑**：掌握度≥80%为"已掌握"（绿色），40%-79%为"学习中"（黄色），<40%为"未学习"（灰色）

## 导航关系

### 从哪来
| 来源页面 | 场景说明 |
|----------|----------|
| B1 首页-学生模式 | 点击"知识课堂"功能气泡 |

### 到哪去
| 目标页面 | 触发条件 |
|----------|----------|
| D4 知识点精讲 | 点击任意知识点卡片，进入对应知识点精讲 |
