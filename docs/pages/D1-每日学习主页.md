# D1 每日学习主页

## 页面信息
- **所属模块**：D-核心学习模块
- **页面类型**：Tab页（学生模式底部导航第二个Tab）
- **数字人老师**：小/右上角悬浮
- **支持模式**：学生

## 线框图

```
┌──────────────────────────────────┐
│ 9:41              ⚡ 85%         │
├──────────────────────────────────┤
│  今日学习          ⏱ 00:42:15   │
│                          ┌────┐ │
│ ┌────┐ ┌────┐ ┌────┐    │ 🌸 │ │
│ │数学│ │语文│ │英语│    │老师│ │
│ └────┘ └────┘ └────┘    └────┘ │
│  ━━━━                          │
├──────────────────────────────────┤
│                                  │
│  📖 今日任务 (3/5)              │
│  ──────────────────────────────  │
│                                  │
│  ☑ 分数加减法 · 知识点精讲       │
│    已完成 · 掌握度 85%           │
│  ──────────────────────────────  │
│                                  │
│  ☑ 口算练习 · 每日一练           │
│    已完成 · 正确率 90%           │
│  ──────────────────────────────  │
│                                  │
│  ☐ 应用题专项 · 拍照判题         │
│    未开始                        │
│  ──────────────────────────────  │
│                                  │
│  ☐ 古诗词背诵 · 知识点精讲       │
│    未开始                        │
│  ──────────────────────────────  │
│                                  │
│  ☐ 英语单词听写 · 听写练习       │
│    未开始                        │
│  ──────────────────────────────  │
│                                  │
│  ┌──────────────────────────┐   │
│  │   ✨ AI推荐：你的分数     │   │
│  │   运算还需加强，点击练习  │   │
│  └──────────────────────────┘   │
│                                  │
├──────────────────────────────────┤
│  🏠     📚      💬      👤     │
│  首页   学习    答疑    我的     │
└──────────────────────────────────┘
```

### 25分钟学习提醒弹窗

```
┌──────────────────────────────────┐
│                                  │
│  ┌──────────────────────────┐   │
│  │                          │   │
│  │    🎉 学习25分钟啦！     │   │
│  │                          │   │
│  │  小花老师建议你休息一下   │   │
│  │  站起来活动活动身体吧~   │   │
│  │                          │   │
│  │  ┌──────┐  ┌──────────┐ │   │
│  │  │ 休息 │  │ 继续学习 │ │   │
│  │  └──────┘  └──────────┘ │   │
│  │                          │   │
│  └──────────────────────────┘   │
│                                  │
└──────────────────────────────────┘
```

## 元素说明

| 元素 | 类型 | 说明 |
|------|------|------|
| 学习计时器 | 文本 | 右上方显示"⏱ HH:MM:SS"，实时递增，记录当日累计学习时长 |
| 学科切换Tab | 分段控件 | 数学/语文/英语三科切换，当前选中项有下划线高亮 |
| 小花老师头像 | 悬浮视图 | 右上角48x48圆形头像，带呼吸动画，点击可展开对话 |
| 任务进度标题 | 文本 | "今日任务 (已完成/总数)"，动态更新 |
| 任务卡片 | 列表项 | 包含：复选框、任务名称、任务类型标签、完成状态/数据 |
| 复选框 | 控件 | 已完成为绿色勾选，未完成为空心圆框 |
| AI推荐卡片 | 卡片 | 底部渐变背景卡片，展示AI个性化学习建议 |
| 底部导航栏 | Tab栏 | 4个Tab：首页、学习(当前)、答疑、我的 |
| 休息提醒弹窗 | 模态弹窗 | 每学习25分钟自动弹出，半透明遮罩 |

## 交互行为

### 手势交互
- **左右滑动学科Tab**：切换数学/语文/英语，任务列表随之刷新，带横向滑动过渡动画
- **下拉刷新**：任务列表支持下拉刷新，触发重新拉取今日任务数据
- **上下滚动**：任务列表可垂直滚动，滚动时顶部学科Tab吸顶固定
- **左滑任务卡片**：露出"跳过"操作按钮（仅对未完成任务有效）

### 输入交互
- **点击任务卡片**：跳转到对应任务详情页面（拍照判题/知识点精讲/答疑等）
- **点击AI推荐卡片**：跳转到推荐的练习或知识点页面
- **点击小花老师头像**：展开语音对话浮层，小花老师用语音介绍今日学习安排
- **点击计时器**：展开今日学习时间统计详情（各科时间分布饼图）

### 动画与反馈
- **任务完成动画**：勾选复选框时播放绿色对勾弹跳动画+轻微震动反馈
- **进度更新**：任务完成后，标题中的进度数字有数字滚动动画
- **计时器**：秒级刷新，数字变化无动画保持稳定
- **小花老师呼吸动画**：头像有缓慢的缩放呼吸效果，表示在线状态
- **页面进入动画**：任务卡片从下往上依次渐入，间隔50ms

### AI 老师交互
- **进入页面时**：小花老师语音播报"今天有X个任务等着你，我们开始吧！"
- **完成任务时**：小花老师语音鼓励"太棒了！又完成一个任务！"
- **全部完成时**：小花老师全屏庆祝动画+语音"今天的任务全部完成啦，你真厉害！"
- **25分钟提醒**：小花老师语音提醒"学了好一会儿了，休息一下眼睛吧~"
- **长时间未操作**：超过3分钟无操作，小花老师轻声提醒"还在吗？需要帮助吗？"

## 状态枚举

### 默认状态
- 显示当日任务列表，按优先级排序（AI推荐 > 未完成 > 已完成）
- 计时器从00:00:00开始（如当日已有学习记录则从已有时长继续）
- 默认展示数学科目Tab

### 空状态
- 场景：当日无任何学习任务
- 展示：小花老师大图 + 文案"今天没有安排任务哦，要不要自己选一个知识点学习？"
- 操作按钮："去选知识点" → 跳转D5知识点列表

### 加载状态
- 学科Tab和顶部栏正常展示
- 任务列表区域显示3个骨架屏卡片，带脉冲闪烁动画
- 计时器正常显示

### 错误状态
- 网络异常：显示断网插图 + "网络开小差了" + "点击重试"按钮
- 服务异常：显示错误插图 + "服务暂时不可用，请稍后再试" + "重试"按钮
- 错误状态下计时器暂停

### 边界情况
- **任务数量上限**：单科最多显示10个任务，超出部分折叠为"查看更多N个任务"
- **学科无任务**：切换到某学科无任务时，显示该学科的空状态文案
- **跨日切换**：0:00自动刷新任务列表，计时器归零重新开始
- **后台切回**：App从后台切回时，更新计时器（排除后台时间）并刷新任务状态
- **多设备同步**：如在其他设备完成了任务，切回本设备时下拉刷新同步状态

## 导航关系

### 从哪来
- **B1-首页**：点击"开始学习"或"继续学习"按钮跳转至此
- **C2a-学习计划设置**：完成学习计划配置后自动跳转至此

### 到哪去
- **D2-拍照判题**：点击类型为"拍照判题"的任务卡片
- **D3-实时答疑**：点击底部导航"答疑"Tab，或点击小花老师头像发起提问
- **D4-知识点精讲**：点击类型为"知识点精讲"的任务卡片
- **D5-知识点列表**：点击AI推荐卡片中的"查看全部知识点"，或空状态下点击"去选知识点"
