# C5 测评结果

## 页面信息
- **所属模块**：C - 学习计划模块（测评子模块）
- **页面类型**：全屏页
- **数字人老师**：大/居中（成绩揭晓时） → 小/右上角悬浮（查看详情时）
- **支持模式**：通用（学生查看自己成绩 / 家长查看孩子成绩）

## 线框图

### 成绩揭晓阶段

```
┌──────────────────────────────────┐
│              测评结果             │
├──────────────────────────────────┤
│                                  │
│        ┌──────────────┐          │
│        │   数字人老师   │          │
│        │   (大/居中)    │          │
│        │   鼓掌动画     │          │
│        │  "太棒了！"    │          │
│        └──────────────┘          │
│                                  │
│         ┌──────────┐             │
│         │          │             │
│         │   85     │             │
│         │   /100   │             │
│         │          │             │
│         └──────────┘             │
│        ← 环形进度动画 →           │
│                                  │
│     ┌────────────────────┐       │
│     │  超越了 78% 的同学  │       │
│     └────────────────────┘       │
│                                  │
│  ┌──────────────────────────┐    │
│  │ 数学测评 · 进阶难度       │    │
│  │ 用时: 22分钟 / 30分钟     │    │
│  │ 正确: 13/15题             │    │
│  │ 较上次: ↑ 5分 (+6.25%)    │    │
│  └──────────────────────────┘    │
│                                  │
│        ↓ 下滑查看详情            │
│                                  │
└──────────────────────────────────┘
```

### 详情查看阶段（下滑后）

```
┌──────────────────────────────────┐
│ ←  测评结果  数学·进阶    [老师] │
├──────────────────────────────────┤
│                                  │
│  ┌──────────────────────────┐    │
│  │  成绩概览         85/100 │    │
│  │  ┌─────┬─────┬─────┐    │    │
│  │  │正确  │错误  │用时  │    │    │
│  │  │ 13题 │ 2题  │22min│    │    │
│  │  └─────┴─────┴─────┘    │    │
│  └──────────────────────────┘    │
│                                  │
│  ┌──────────────────────────┐    │
│  │  能力雷达图               │    │
│  │       计算                │    │
│  │      ╱    ╲               │    │
│  │  应用╱  ●●● ╲推理         │    │
│  │     │ ●     ● │          │    │
│  │  几何╲ ●●●●● ╱代数        │    │
│  │      ╲    ╱               │    │
│  │       统计                │    │
│  └──────────────────────────┘    │
│                                  │
│  ┌──────────────────────────┐    │
│  │  错题详解 (2题)    展开 ∨ │    │
│  ├──────────────────────────┤    │
│  │                           │    │
│  │  第5题 ✗                  │    │
│  │  ┌────────────────────┐   │    │
│  │  │ 已知三角形ABC中，    │   │    │
│  │  │ AB=5, BC=4, AC=6，  │   │    │
│  │  │ 求三角形面积...      │   │    │
│  │  │                     │   │    │
│  │  │ 你的答案: B          │   │    │
│  │  │ 正确答案: C          │   │    │
│  │  └────────────────────┘   │    │
│  │                           │    │
│  │  🔊 AI老师讲解            │    │
│  │  ┌────────────────────┐   │    │
│  │  │ "这道题需要用海伦    │   │    │
│  │  │  公式。先求半周长     │   │    │
│  │  │  s=(5+4+6)/2=7.5    │   │    │
│  │  │  然后面积=√(s·...)"  │   │    │
│  │  └────────────────────┘   │    │
│  │  [查看知识点: 海伦公式]   │    │
│  │                           │    │
│  │  ─────────────────────    │    │
│  │                           │    │
│  │  第12题 ✗          展开 ∨ │    │
│  │  概率与统计 · 条件概率     │    │
│  │                           │    │
│  └──────────────────────────┘    │
│                                  │
│  ┌──────────────────────────┐    │
│  │  正确题目 (13题)   展开 ∨ │    │
│  └──────────────────────────┘    │
│                                  │
│  ┌──────────────────────────┐    │
│  │  ┌──────────────────┐    │    │
│  │  │  生成学习计划 →    │    │    │
│  │  └──────────────────┘    │    │
│  └──────────────────────────┘    │
│                                  │
└──────────────────────────────────┘
```

### 排名百分比环动画序列

```
阶段1: 空环          阶段2: 填充中        阶段3: 完成
┌──────────┐      ┌──────────┐       ┌──────────┐
│  ╭─────╮ │      │  ╭━━━━━╮ │       │  ╭━━━━━╮ │
│  │     │ │      │  ┃     │ │       │  ┃     ┃ │
│  │ --- │ │  →   │  ┃ 78% │ │   →   │  ┃ 78% ┃ │
│  │     │ │      │  ┃     ┃ │       │  ┃     ┃ │
│  ╰─────╯ │      │  ╰━━━━━┃ │       │  ╰━━━━━╯ │
└──────────┘      └──────────┘       └──────────┘
   (灰色空环)       (蓝色渐进填充)     (完成+弹跳)
```

## 元素说明

| 序号 | 元素名称 | 类型 | 说明 |
|------|---------|------|------|
| 1 | 导航栏 | 固定顶栏 | 揭晓阶段：无返回按钮，居中标题"测评结果"；详情阶段：左侧返回按钮，显示科目和难度信息，右侧AI老师头像 |
| 2 | AI老师庆祝区 | 动态组件 | 成绩揭晓时大尺寸居中显示，根据成绩播放不同表情和动画（优秀=鼓掌、良好=竖拇指、及格=微笑鼓励、不及格=加油手势） |
| 3 | 分数显示 | 核心数据 | 大字号显示得分/总分，带数字翻滚动画（从0滚动到最终分数） |
| 4 | 排名百分比环 | 环形图 | 圆环动画显示"超越了XX%的同学"，从空环渐进填充到目标百分比 |
| 5 | 测评摘要卡片 | 信息卡片 | 显示测评科目、难度、用时、正确题数、与上次对比（升降箭头+分差+百分比） |
| 6 | 成绩概览 | 三栏统计 | 正确题数、错误题数、总用时，用不同颜色区分 |
| 7 | 能力雷达图 | 图表组件 | 五维或六维雷达图展示各能力维度得分（如计算、推理、应用、几何等），与上次测评的雷达图叠加对比 |
| 8 | 错题详解区 | 可折叠列表 | 每道错题为一个可展开/收起的卡片，展开后显示：题目内容、你的答案（红色）、正确答案（绿色）、AI语音讲解、关联知识点链接 |
| 9 | AI语音讲解 | 音频+文字 | 每道错题配有AI老师的语音讲解，自动播放第一道，后续需手动点击播放，同步显示讲解文字 |
| 10 | 知识点链接 | 文字链接 | 每道错题关联的知识点，点击跳转D4知识点详情页 |
| 11 | 正确题目区 | 可折叠列表 | 默认收起，展开后显示所有正确题目（简略模式：题号+题目摘要） |
| 12 | 底部操作区 | 按钮组 | "生成学习计划"主按钮 → C1 |

## 交互行为

### 手势交互
- **下滑切换**：成绩揭晓阶段下滑进入详情查看阶段，AI老师从大尺寸缩小到右上角，有平滑过渡动画
- **纵向滚动**：详情阶段整体纵向滚动查看所有内容
- **展开/收起错题**：点击错题标题栏展开或收起该题详解，有高度过渡动画
- **左右滑动错题**：在错题详解区左右滑动可切换上一道/下一道错题

### 输入交互
- **播放AI讲解**：点击"AI老师讲解"区域的播放按钮，开始语音播放，同步高亮讲解文字
- **暂停/继续讲解**：点击播放中的讲解可暂停，再次点击继续
- **知识点跳转**：点击"查看知识点"链接跳转到对应知识点详情页（D4）
- **生成学习计划**：点击"生成学习计划"按钮跳转C1，携带本次测评数据
- **分享成绩**：长按分数区域弹出分享菜单，可生成成绩海报分享

### 动画与反馈
- **成绩揭晓序列**（总时长约3秒）：
  1. AI老师先出现，播放期待表情（500ms）
  2. 分数数字从0快速翻滚到最终分数（800ms），伴随计数音效
  3. 排名百分比环从空环渐进填充到目标值（1000ms）
  4. AI老师切换为对应表情（鼓掌/竖拇指等），播放语音评价（500ms+）
  5. 测评摘要卡片从底部弹入（300ms）
- **分数翻滚动画**：数字快速递增，先快后慢（缓出曲线），最终定格有轻微弹跳
- **百分比环动画**：环形从12点方向顺时针渐进填充，有渐变色（蓝→绿），填充完成时有脉冲扩散效果
- **对比箭头动画**：与上次对比的升/降箭头有弹入动画，上升为绿色向上弹跳，下降为红色向下滑入
- **雷达图动画**：数据点从中心逐个扩展到目标位置，连线跟随绘制，与上次数据叠加显示（上次为虚线半透明）
- **错题展开动画**：卡片高度过渡（300ms），内容淡入，AI讲解区域有波纹扩散效果
- **AI讲解播放**：讲解文字逐句高亮同步语音播放，类似字幕效果

### AI 老师交互
- **成绩评价**（根据分数段）：
  - 90-100分："太厉害了！几乎全对！你就是学霸本霸！"（鼓掌+撒花动画）
  - 80-89分："很棒哦！继续保持就能更上一层楼！"（竖拇指动画）
  - 70-79分："还不错，有几个知识点需要巩固一下"（微笑+点头动画）
  - 60-69分："及格了，但还有提升空间哦，我们一起加油！"（鼓励拳头动画）
  - 60分以下："没关系，我们来看看哪些地方需要加强，下次一定更好！"（温暖拥抱动画）
- **错题自动讲解**：进入详情后自动展开第一道错题并播放AI语音讲解
- **讲解内容**：每道错题AI老师给出：① 错误原因分析 ② 正确解题思路 ③ 同类题型方法总结
- **学习建议**：所有错题讲解完后，AI老师总结性建议："这次主要是三角形面积计算和条件概率两个知识点需要加强，建议在学习计划里重点安排一下"
- **计划引导**：AI老师引导创建计划："要不要根据这次测评结果，让我帮你制定一个针对性的学习计划？"

## 状态枚举

### 默认状态
- 先进入成绩揭晓阶段，播放完整揭晓动画序列
- 下滑后进入详情查看阶段
- 错题详解区默认展开第一道错题
- 正确题目区默认收起
- AI老师语音自动播放

### 空状态（无错题）
- 错题详解区不显示，替换为AI老师特别表扬："全部正确！太完美了！"
- 能力雷达图所有维度满分，有特殊金色效果
- 底部操作区隐藏"生成学习计划"（已经很优秀了），显示"挑战更高难度"按钮

### 加载状态
- 成绩区域显示加载动画（AI老师做"数分"动画）
- 提示文案："正在批改你的试卷…"
- 预计等待时间显示

### 错误状态
- 成绩计算失败：显示"评分出了点问题"，提供"重新计算"按钮
- 网络异常：显示"网络不太好，成绩已保存在本地"，可稍后在"我的测评记录"中查看

### 边界情况
- **多科目测评结果**：分科目依次展示成绩，可横向切换科目Tab（数学/英语/语文），每个科目独立的成绩和错题
- **首次测评**：无上次对比数据，隐藏对比箭头，AI老师说"这是第一次测评，为后续学习打好基础"
- **成绩大幅下降**：对比上次下降超过15分，AI老师特别关怀："这次成绩有点波动，可能是最近有些知识点没来得及复习，没关系我们一起制定计划"
- **成绩大幅上升**：对比上次上升超过15分，AI老师特别表扬+"进步之星"徽章动画
- **家长模式查看**：额外显示"发送报告给家长"按钮（学生模式），家长模式下显示"与孩子一起复习错题"按钮

## 导航关系

### 从哪来
- **C4 测评进行中**：正常提交或超时自动提交后跳转，携带完整答题数据

### 到哪去
- **C1 学习计划创建**：点击"生成学习计划"按钮，携带测评结果数据（薄弱知识点、建议学习时长等）
- **D4 知识点详情页**：点击错题关联的知识点链接，携带知识点ID
