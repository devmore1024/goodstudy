# B1 首页-学生模式

## 页面信息
- **所属模块**：首页模块（B）
- **页面类型**：Tab页（底部导航第一个Tab）
- **数字人老师**：大/居中，带待机呼吸动画循环
- **支持模式**：学生

## 线框图

```
┌──────────────────────────────────┐
│ 状态栏（系统）                    │
├──────────────────────────────────┤
│  早上好，小明同学！          [铃] │
│  今天是周二，加油哦~              │
├──────────────────────────────────┤
│                                  │
│          ┌──────────┐            │
│          │          │            │
│          │  小花老师  │            │
│          │  (数字人)  │            │
│          │  待机动画  │            │
│          │          │            │
│          └──────────┘            │
│       "小花老师，你好"            │
│      ┌────────────────┐          │
│      │ 🎤 按住说话     │          │
│      └────────────────┘          │
│                                  │
├──────────────────────────────────┤
│  今日学习任务              2/5完成 │
│ ┌────────────────────────────┐   │
│ │ ✅ 语文·古诗词背诵    已完成 │   │
│ ├────────────────────────────┤   │
│ │ ✅ 数学·分数加减法    已完成 │   │
│ ├────────────────────────────┤   │
│ │ ○  英语·Unit3单词     待学习 │   │
│ ├────────────────────────────┤   │
│ │ ○  数学·应用题练习    待学习 │   │
│ ├────────────────────────────┤   │
│ │ ○  语文·阅读理解      待学习 │   │
│ └────────────────────────────┘   │
│                                  │
├──────────────────────────────────┤
│  快捷入口（长按可编辑排序）        │
│ ┌───────┐ ┌───────┐ ┌───────┐   │
│ │ 📷    │ │ 💬    │ │ 📖    │   │
│ │拍照判题│ │  答疑  │ │知识点  │   │
│ └───────┘ └───────┘ └───────┘   │
│ ┌───────┐ ┌───────┐              │
│ │ 📝    │ │ 🏆    │              │
│ │ 测评   │ │ 成就   │              │
│ └───────┘ └───────┘              │
│                                  │
├──────────────────────────────────┤
│  [首页]   每日学习  学习报告  我的 │
│   ●                              │
└──────────────────────────────────┘
```

## 元素说明

### 顶部问候区域
| 元素 | 类型 | 说明 |
|------|------|------|
| 问候语 | 文本 | 根据当前时段动态显示（早上好/下午好/晚上好），包含学生姓名，字号18sp，加粗 |
| 日期提示 | 文本 | 显示今天星期几及鼓励语，字号14sp，次要文字色 |
| 通知铃铛 | 图标按钮 | 右上角，有未读通知时显示红色圆点角标，点击进入通知列表 |

### 数字人老师区域
| 元素 | 类型 | 说明 |
|------|------|------|
| 小花老师形象 | 3D数字人渲染 | 居中展示，高度约占屏幕1/3，待机时播放呼吸动画（微微晃动、眨眼） |
| 语音唤醒提示 | 文本 | 数字人下方，提示"小花老师，你好"唤醒词，字号12sp，辅助色 |
| 按住说话按钮 | 圆角按钮 | 麦克风图标+文字，宽度200dp，高度44dp，主题色背景 |

### 今日学习任务卡片
| 元素 | 类型 | 说明 |
|------|------|------|
| 区域标题 | 文本 | "今日学习任务"，字号16sp，加粗 |
| 完成进度 | 文本 | 右侧显示"X/Y完成"，实时更新，主题色 |
| 任务列表项 | 列表 | 每项含：完成状态图标（勾选/空心圆）、学科标签、任务名称、状态文字 |
| 已完成任务 | 列表项 | 绿色勾选图标，文字带删除线效果，灰色次要色 |
| 待学习任务 | 列表项 | 空心圆图标，文字主色，可点击进入对应学习页面 |

### 快捷入口区域
| 元素 | 类型 | 说明 |
|------|------|------|
| 区域标题 | 文本 | "快捷入口"，字号16sp，加粗；右侧小字提示"长按可编辑排序" |
| 入口图标 | 网格布局 | 每行3个，图标48dp，圆角12dp背景，下方文字12sp |
| 拍照判题 | 快捷入口 | 跳转到D2拍照判题页面 |
| 答疑 | 快捷入口 | 跳转到D3 AI答疑页面 |
| 知识点 | 快捷入口 | 跳转到知识点浏览页面 |
| 测评 | 快捷入口 | 跳转到C4测评页面 |
| 成就 | 快捷入口 | 跳转到成就展示页面 |

### 底部Tab栏
| 元素 | 类型 | 说明 |
|------|------|------|
| Tab栏 | 底部导航 | 固定底部，高度56dp，白色背景，顶部1px分割线 |
| 首页 | Tab项 | 当前选中态，主题色图标+文字 |
| 每日学习 | Tab项 | 默认态，灰色图标+文字，点击跳转D1 |
| 学习报告 | Tab项 | 默认态，有新报告时显示红点 |
| 我的 | Tab项 | 默认态，点击跳转F1个人中心 |

## 交互行为

### 手势交互
- **下拉刷新**：在任务卡片区域下拉，触发数据刷新，小花老师播放"刷新"动作动画，语音提示"让我看看最新的学习任务~"
- **上滑浏览**：页面整体可上下滚动，数字人区域随页面滚动会缩小并吸附到右上角（过渡动画300ms）
- **左右滑动任务卡片**：单个任务项支持左滑显示"稍后学习"操作按钮
- **长按快捷入口**：进入编辑模式，所有入口图标抖动，支持拖拽排序，点击空白区域或"完成"按钮退出编辑
- **点击任务项**：待学习任务可点击，直接进入对应学习内容页面
- **点击已完成任务**：弹出简要完成摘要浮层（用时、正确率等）

### 输入交互
- **语音唤醒**：全局监听"小花老师"唤醒词（需用户授权麦克风权限），唤醒后数字人进入聆听状态，界面底部弹出语音输入浮层
- **按住说话**：按住按钮期间录音，松开后发送语音指令给AI处理，支持语音识别为文字显示
- **语音指令识别**：支持自然语言指令，如"开始今天的数学学习""帮我检查作业""我想复习英语单词"等
- **声纹验证**：首次语音唤醒时自动进行声纹比对，确认是注册的学生本人

### 动画与反馈
- **数字人待机动画**：循环播放呼吸动画（轻微上下浮动、眨眼、偶尔挥手），每30秒随机切换一个待机姿态
- **数字人交互动画**：语音交互时播放说话口型动画，完成任务时播放鼓掌动画，登录时播放挥手问好动画
- **任务完成动画**：完成一项任务后，对应列表项播放勾选打钩动画（300ms），进度数字刷新带数字翻转效果
- **页面进入动画**：首次进入时，数字人从屏幕下方弹入（500ms缓动），问候语淡入（300ms延迟）
- **语音波纹**：录音期间，按住说话按钮周围显示声波扩散动画，实时反映音量大小
- **触觉反馈**：长按快捷入口时触发轻微震动（haptic feedback），任务完成时触发成功震动

### AI 老师交互
- **进入页面问候**：小花老师根据时段和学习进度自动语音问候。例如：
  - 早上首次打开："早上好呀小明！今天有5个学习任务等着你，我们先从语文古诗词开始吧？"
  - 下午打开："小明同学下午好！你上午完成了2个任务，真棒！还有3个任务需要加油哦~"
  - 全部完成后打开："哇，小明今天的任务全部完成啦！太厉害了，要不要做一些拓展练习？"
- **主动提醒**：如果学生长时间未操作（超过30秒），小花老师会语音提示"小明，要开始学习了吗？点击任务就可以开始哦~"
- **任务引导**：点击待学习任务时，小花老师语音介绍该任务内容和预计用时："这个是分数加减法练习，大概需要15分钟，准备好了吗？"
- **成就鼓励**：完成任务后，小花老师随机播放鼓励语音，如"做得好！""你真是太棒了！""继续保持哦~"

## 状态枚举

### 默认状态
- 页面正常加载完成，显示学生姓名、问候语
- 数字人播放待机动画
- 任务列表显示今日所有学习任务及完成状态
- 快捷入口按用户自定义顺序排列（默认：拍照判题、答疑、知识点、测评、成就）
- 底部Tab栏首页项高亮

### 空状态
- **无学习任务**：任务卡片区域显示空状态插画（小花老师举着"太棒了"牌子），文案"今天没有学习任务安排哦~去探索其他功能吧！"，显示"去探索"按钮
- **未设置学习计划**：新用户首次进入且家长尚未设置学习计划时，显示引导卡片"请让爸爸妈妈帮你设置学习计划吧"，附带"通知家长"按钮
- **网络不可用但有缓存**：显示缓存的上次任务数据，顶部横幅提示"当前无网络连接，显示的是上次数据"

### 加载状态
- **首次加载**：数字人区域显示加载骨架屏，任务列表显示3行灰色占位条纹动画
- **刷新加载**：下拉刷新时顶部显示圆形加载指示器，小花老师播放"思考中"动画（手托下巴）
- **语音处理中**：录音结束后，按钮变为"识别中..."状态，显示三个跳动圆点动画

### 错误状态
- **网络错误**：任务卡片区域显示网络断开插画，文案"网络开小差了~"，"重新加载"按钮
- **语音识别失败**：弹出轻提示Toast"没有听清楚，请再说一次"，小花老师播放疑惑动画（歪头），自动恢复到待机状态
- **声纹验证失败**：弹出弹窗提示"声音验证未通过，请让注册的同学来操作"，提供"切换账号"和"重试"按钮
- **数字人加载失败**：显示小花老师静态头像图片替代，底部文字提示"小花老师正在赶来的路上~"

### 边界情况
- **任务数量过多（>10）**：任务列表最多显示前5项，底部折叠显示"查看全部X个任务"按钮，点击展开或跳转任务列表页
- **多端登录冲突**：弹窗提示"你的账号在另一台设备上登录了"，提供"继续使用"（踢掉另一端）和"退出登录"选项
- **学习时间限制**：家长设置的可用时段之外打开App时，显示锁定页"当前不在学习时间段内，请在XX:XX-XX:XX时间段使用"，数字人播放"睡觉"动画
- **深夜使用提醒**：22:00后打开，小花老师语音提示"已经很晚了，早点休息明天继续学习吧~"，页面增加护眼模式暖色滤镜
- **快捷入口数量**：最少保留3个入口，最多支持8个，编辑模式下可从更多功能池中添加
- **姓名过长**：问候语中学生姓名超过6个字时截断显示，末尾加"..."

## 导航关系

### 从哪来
| 来源页面 | 场景说明 |
|----------|----------|
| A1 启动页 | 老用户直接登录后进入，自动声纹识别为学生身份 |
| A3a 学生注册引导 | 新学生完成注册引导流程后首次进入 |
| A4 声纹采集 | 完成声纹采集后跳转回首页 |
| B2 家长首页 | 通过底部Tab或身份切换进入学生模式首页 |
| 其他Tab页 | 从每日学习/学习报告/个人中心Tab切换回首页 |

### 到哪去
| 目标页面 | 触发条件 |
|----------|----------|
| D1 每日学习 | 点击底部Tab"每日学习"，或点击任务列表中的待学习任务 |
| D2 拍照判题 | 点击快捷入口"拍照判题" |
| D3 AI答疑 | 点击快捷入口"答疑"，或语音唤醒后提问 |
| C4 测评页面 | 点击快捷入口"测评" |
| F1 个人中心 | 点击底部Tab"我的" |
| 学习报告 | 点击底部Tab"学习报告" |
| 通知列表 | 点击右上角铃铛图标 |
| 成就页面 | 点击快捷入口"成就" |
