# D5 知识点列表

## 页面信息
- **所属模块**：D-核心学习模块
- **页面类型**：全屏页
- **数字人老师**：不显示
- **支持模式**：学生

## 线框图

### 默认状态

```
┌──────────────────────────────────┐
│ ← 知识点列表                    │
├──────────────────────────────────┤
│ ┌────┐  ┌────┐  ┌────┐         │
│ │数学│  │语文│  │英语│         │
│ └────┘  └────┘  └────┘         │
│  ━━━━                           │
├──────────────────────────────────┤
│ ┌──────────────────────────┐    │
│ │ 🔍 搜索知识点...         │    │
│ └──────────────────────────┘    │
│                                  │
│ 全部  已掌握  学习中  未学习    │
│ ━━━━                            │
├──────────────────────────────────┤
│                                  │
│ ┌──────────────────────────┐    │
│ │ ✨ AI推荐学习                 │
│ │ ┌────────────────────────┐│   │
│ │ │ 📌 分数乘除法          ││   │
│ │ │ 掌握度 35% ━━━○────── ││   │
│ │ │ 建议优先复习            ││   │
│ │ └────────────────────────┘│   │
│ └──────────────────────────┘    │
│                                  │
│ ▼ 第一章 · 分数的意义和性质     │
│ ──────────────────────────────   │
│                                  │
│   分数的意义                     │
│   ████████████████░░░░ 80%      │
│   最近学习：2天前                │
│ ──────────────────────────────   │
│                                  │
│   真分数和假分数                 │
│   ████████████░░░░░░░░ 60%      │
│   最近学习：3天前                │
│ ──────────────────────────────   │
│                                  │
│   分数的基本性质                 │
│   ████████████████████ 100%     │
│   最近学习：1天前                │
│ ──────────────────────────────   │
│                                  │
│ ▶ 第二章 · 分数加减法 (收起)    │
│ ──────────────────────────────   │
│                                  │
│ ▶ 第三章 · 分数乘除法 (收起)    │
│ ──────────────────────────────   │
│                                  │
└──────────────────────────────────┘
```

### 搜索结果状态

```
┌──────────────────────────────────┐
│ ← 知识点列表                    │
├──────────────────────────────────┤
│ ┌────┐  ┌────┐  ┌────┐         │
│ │数学│  │语文│  │英语│         │
│ └────┘  └────┘  └────┘         │
├──────────────────────────────────┤
│ ┌──────────────────────────┐    │
│ │ 🔍 分数            ✕    │    │
│ └──────────────────────────┘    │
│                                  │
│ 找到 6 个相关知识点              │
│ ──────────────────────────────   │
│                                  │
│   「分数」的意义                 │
│   ████████████████░░░░ 80%      │
│ ──────────────────────────────   │
│                                  │
│   真「分数」和假「分数」         │
│   ████████████░░░░░░░░ 60%      │
│ ──────────────────────────────   │
│                                  │
│   「分数」的基本性质             │
│   ████████████████████ 100%     │
│ ──────────────────────────────   │
│                                  │
│   「分数」加减法                 │
│   ██████████████░░░░░░ 70%      │
│ ──────────────────────────────   │
│                                  │
│   「分数」乘法                   │
│   ██████░░░░░░░░░░░░░░ 35%     │
│ ──────────────────────────────   │
│                                  │
│   「分数」除法                   │
│   ░░░░░░░░░░░░░░░░░░░░ 0%      │
│   未学习                         │
│ ──────────────────────────────   │
│                                  │
└──────────────────────────────────┘
```

### 筛选状态（已掌握）

```
┌──────────────────────────────────┐
│ ← 知识点列表                    │
├──────────────────────────────────┤
│ ┌────┐  ┌────┐  ┌────┐         │
│ │数学│  │语文│  │英语│         │
│ └────┘  └────┘  └────┘         │
├──────────────────────────────────┤
│ ┌──────────────────────────┐    │
│ │ 🔍 搜索知识点...         │    │
│ └──────────────────────────┘    │
│                                  │
│ 全部  已掌握  学习中  未学习    │
│       ━━━━━━                     │
├──────────────────────────────────┤
│                                  │
│  已掌握 3 个知识点               │
│ ──────────────────────────────   │
│                                  │
│   分数的基本性质                 │
│   ████████████████████ 100%     │
│   最近学习：1天前                │
│ ──────────────────────────────   │
│                                  │
│   整数四则运算                   │
│   ████████████████████ 100%     │
│   最近学习：5天前                │
│ ──────────────────────────────   │
│                                  │
│   小数的认识                     │
│   ██████████████████░░ 90%      │
│   最近学习：1周前                │
│ ──────────────────────────────   │
│                                  │
│                                  │
│                                  │
└──────────────────────────────────┘
```

## 元素说明

| 元素 | 类型 | 说明 |
|------|------|------|
| 导航栏 | 顶部栏 | 返回按钮 + 标题"知识点列表" |
| 学科Tab | 分段控件 | 数学/语文/英语三科切换，当前选中有下划线高亮 |
| 搜索栏 | 输入控件 | 带搜索图标，输入即时过滤，右侧清除按钮(✕) |
| 掌握度筛选 | 筛选Tab | 全部/已掌握/学习中/未学习四项筛选，选中有下划线 |
| AI推荐卡片 | 置顶卡片 | 渐变背景 + 星标图标，展示AI推荐的优先学习知识点 |
| 章节折叠头 | 折叠控件 | ▼展开/▶收起，显示章节名称，点击切换折叠状态 |
| 知识点列表项 | 列表项 | 包含：知识点名称、掌握度进度条、最近学习日期 |
| 掌握度进度条 | 进度条 | 彩色横条，绿色(≥80%)、黄色(40%-79%)、灰色(<40%或未学习) |
| 搜索结果高亮 | 文本样式 | 搜索关键词在结果中以蓝色加粗显示（「」标注） |
| 搜索结果计数 | 文本 | 显示"找到 N 个相关知识点" |

## 交互行为

### 手势交互
- **上下滚动**：垂直滚动浏览知识点列表，搜索栏和学科Tab吸顶固定
- **左右滑动学科Tab**：切换数学/语文/英语，列表刷新为对应学科
- **下拉刷新**：拉取最新知识点数据和掌握度信息
- **左滑知识点项**：露出"标记已掌握"快捷操作按钮

### 输入交互
- **点击搜索栏**：激活搜索框，弹出键盘，输入关键词实时过滤知识点
- **点击清除按钮(✕)**：清空搜索内容，恢复完整列表
- **点击掌握度筛选Tab**：按掌握状态筛选列表内容
- **点击章节折叠头**：展开或收起该章节下的知识点列表
- **点击知识点列表项**：跳转到D4知识点精讲页面
- **点击AI推荐卡片**：跳转到推荐的知识点精讲页面
- **点击学科Tab**：切换学科，列表内容和AI推荐同步更新

### 动画与反馈
- **学科切换动画**：列表内容淡出淡入过渡，200ms
- **筛选切换动画**：列表项重新排列，带位移过渡动画
- **章节展开/收起**：平滑的高度过渡动画，箭头旋转动画，300ms
- **搜索实时过滤**：输入字符后200ms防抖触发过滤，结果列表淡入
- **掌握度进度条**：首次加载时从0到实际值的填充动画，500ms
- **列表项点击反馈**：点击时背景色变化（浅灰色按压态）

### AI 老师交互
- 本页面不显示数字人老师
- AI推荐卡片内容由后端AI引擎根据学生学习数据动态生成
- 推荐逻辑：优先推荐掌握度低但前置知识已掌握的知识点

## 状态枚举

### 默认状态
- 默认显示数学学科，"全部"筛选
- 章节按教材目录顺序排列，第一章默认展开，其余收起
- AI推荐卡片置顶显示（如有推荐）
- 掌握度进度条实时反映学习数据

### 空状态
- **整体无知识点**：场景为新用户未配置年级/教材，显示"请先设置你的年级和教材" + "去设置"按钮
- **筛选无结果**：显示"没有符合条件的知识点"，如筛选"已掌握"无结果则显示"还没有已掌握的知识点，继续加油哦！"
- **搜索无结果**：显示"没有找到「关键词」相关的知识点" + "换个关键词试试"
- **某学科无内容**：切换到未配置的学科，显示"该学科暂未开放，敬请期待"

### 加载状态
- 首次加载：搜索栏和学科Tab正常显示，列表区域显示6个骨架屏列表项
- 学科切换：列表区域显示短暂加载动画（旋转图标），0.5秒内刷新
- 搜索中：搜索栏右侧显示小型加载旋转图标

### 错误状态
- **网络异常**：显示断网插图 + "网络不可用" + "重试"按钮
- **数据加载失败**：显示"加载失败" + "点击重试"
- **搜索服务异常**：搜索栏下方提示"搜索暂不可用，请稍后再试"

### 边界情况
- **知识点数量极多**：分页加载，每页20个知识点，滚动到底部自动加载下一页
- **掌握度实时更新**：从D4返回时，对应知识点的掌握度数据自动刷新
- **章节数量多**：超过10个章节时，底部显示"展开全部章节"按钮
- **同名知识点**：不同章节的同名知识点，列表项附加章节名以区分
- **长知识点名称**：超过一行的名称以省略号截断，长按可查看完整名称
- **掌握度计算逻辑**：掌握度≥80%为"已掌握"，1%-79%为"学习中"，0%为"未学习"

## 导航关系

### 从哪来
- **D1-每日学习主页**：点击"查看全部知识点"或空状态下"去选知识点"
- **B1-首页**：点击"知识点"快捷入口

### 到哪去
- **D4-知识点精讲**：点击任意知识点列表项或AI推荐卡片，进入对应知识点精讲
