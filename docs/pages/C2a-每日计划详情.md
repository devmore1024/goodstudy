# C2a 每日计划详情

## 页面信息
- **所属模块**：C - 学习计划模块
- **页面类型**：全屏页
- **数字人老师**：小/右上角悬浮
- **支持模式**：学生（主要使用场景） / 家长（查看模式）

## 线框图

```
┌──────────────────────────────────┐
│ ←  今日计划  2月18日 周三 [老师] │
├──────────────────────────────────┤
│                                  │
│  ┌──────────────────────────┐    │
│  │  今日进度  3/5 已完成     │    │
│  │  ●●●○○                   │    │
│  │  已学习 2h15min / 计划 4h │    │
│  └──────────────────────────┘    │
│                                  │
│  ┌─ 时间线 ─────────────────┐    │
│  │                           │    │
│  │  08:00  · · · · · · · ·   │    │
│  │         · · · · · · · ·   │    │
│  │  09:00  · · · · · · · ·   │    │
│  │         · · · · · · · ·   │    │
│  │  10:00 ┌────────────────┐ │    │
│  │    ✅  │ 数学 · 分数运算 │ │    │
│  │   完成  │ 10:00-11:00    │ │    │
│  │        │ 已完成 ✓ 25min  │ │    │
│  │  11:00 └────────────────┘ │    │
│  │         · · · · · · · ·   │    │
│  │  12:00  · · · · · · · ·   │    │
│  │         · · · · · · · ·   │    │
│  │  ..     · · · · · · · ·   │    │
│  │                           │    │
│  │  16:00 ┌────────────────┐ │    │
│  │  ▶NOW  │ 英语 · 阅读理解 │ │    │
│  │ ★当前  │ 16:00-17:00     │ │    │
│  │        │ ┌────────────┐  │ │    │
│  │        │ │ 开始学习 ▶  │  │ │    │
│  │        │ └────────────┘  │ │    │
│  │  17:00 └────────────────┘ │    │
│  │                           │    │
│  │  17:00 ┌────────────────┐ │    │
│  │    ✅  │ 英语 · 单词记忆 │ │    │
│  │   完成  │ 17:00-17:30    │ │    │
│  │        │ 已完成 ✓ 22min  │ │    │
│  │  17:30 └────────────────┘ │    │
│  │                           │    │
│  │  18:00 ┌────────────────┐ │    │
│  │    ○   │ 语文 · 古诗词   │ │    │
│  │  待学   │ 18:00-19:00    │ │    │
│  │        │ 预计时长: 45min │ │    │
│  │  19:00 └────────────────┘ │    │
│  │                           │    │
│  │  19:00 ┌────────────────┐ │    │
│  │    ○   │ 物理 · 力学基础 │ │    │
│  │  待学   │ 19:00-19:45    │ │    │
│  │        │ 预计时长: 35min │ │    │
│  │  19:45 └────────────────┘ │    │
│  │                           │    │
│  │  20:00  · · · · · · · ·   │    │
│  │                           │    │
│  └──────────────────────────┘    │
│                                  │
└──────────────────────────────────┘
```

### 当前时段展开态线框

```
┌──────────────────────────────────┐
│  16:00 ┌─────────────────────┐   │
│  ▶NOW  │ 英语 · 阅读理解      │   │
│ ★当前  │ 16:00-17:00          │   │
│        │                      │   │
│        │ 学习内容:             │   │
│        │ · Unit 5 阅读训练     │   │
│        │ · 完形填空专项 x3     │   │
│        │ · 生词记忆 15个       │   │
│        │                      │   │
│        │ AI老师说:             │   │
│        │ "今天的阅读难度适中，  │   │
│        │  注意理解上下文哦！"   │   │
│        │                      │   │
│        │  ┌────────────────┐  │   │
│        │  │   开始学习 ▶    │  │   │
│        │  └────────────────┘  │   │
│        │                      │   │
│  17:00 └─────────────────────┘   │
└──────────────────────────────────┘
```

## 元素说明

| 序号 | 元素名称 | 类型 | 说明 |
|------|---------|------|------|
| 1 | 导航栏 | 固定顶栏 | 左侧返回，中间显示"今日计划"及日期（月日+星期），右侧AI老师悬浮小头像 |
| 2 | 今日进度卡片 | 统计卡片 | 固定在时间线上方，显示：任务完成数/总数、圆点进度指示（实心=完成，空心=未完成）、已学习时长/计划总时长 |
| 3 | 时间线轴 | 纵向时间轴 | 左侧为时间刻度（整点标注），中间为竖向时间线，右侧为任务卡片区域 |
| 4 | 当前时间指示器 | 动态指示 | 红色横线+三角标记，标注"NOW"，随真实时间自动移动，当前时段卡片自动展开并高亮 |
| 5 | 已完成任务卡片 | 任务卡片 | 左侧绿色勾选图标，卡片整体透明度降低，显示科目、内容、实际用时，点击可展开查看学习记录 |
| 6 | 当前任务卡片 | 任务卡片（高亮） | 蓝色边框+微弱发光效果，展开显示学习内容清单、AI老师寄语、"开始学习"按钮 |
| 7 | 待完成任务卡片 | 任务卡片 | 左侧空心圆圈，正常显示，点击可展开预览学习内容 |
| 8 | "开始学习"按钮 | 主按钮 | 仅在当前时段和已过时段的未完成任务中显示，当前时段为蓝色可点击态，非当前时段为灰色（可强制开始） |
| 9 | AI老师悬浮头像 | 悬浮组件 | 右上角小头像，当前有任务时显示对话气泡提示 |

## 交互行为

### 手势交互
- **纵向滚动**：页面整体纵向滚动浏览一天的所有时段，进入页面时自动滚动到当前时间位置
- **点击任务卡片展开/收起**：点击任意任务卡片可切换展开/收起状态，展开时显示详细学习内容和AI寄语
- **左右滑动任务卡片**：右滑已完成卡片可查看学习详情；左滑待完成卡片可选择"跳过"或"调整时间"
- **下拉刷新**：下拉刷新同步最新完成状态

### 输入交互
- **开始学习按钮**：点击后跳转到对应科目的学习页面（D1-D4），同时记录开始时间
- **跳过任务**：左滑任务卡片露出"跳过"按钮，点击后弹出确认弹窗："确定跳过这个学习任务吗？AI老师可以帮你调整到其他时间"
- **强制开始非当前时段**：点击非当前时段的待完成任务中的"提前开始"链接，确认后跳转学习

### 动画与反馈
- **页面进入**：从C2的周视图点击某天进入时，任务卡片从对应色块位置展开为完整卡片的过渡动画
- **自动定位动画**：进入页面后平滑滚动到当前时间位置，当前时段卡片有脉冲高亮效果
- **完成打勾动画**：任务完成返回此页时，对应卡片的空心圆变为绿色实心勾选，有弹跳缩放效果（先放大到1.3倍再回弹到1.0倍），伴随"叮"音效
- **进度更新动画**：顶部进度圆点从空心变实心，数字递增动画
- **当前时间移动**：NOW指示器每分钟平滑移动一次
- **卡片展开动画**：任务卡片展开/收起有300ms的高度过渡动画，内容淡入/淡出

### AI 老师交互
- **当前任务鼓励**：当前时段开始时，AI老师自动弹出气泡："该学英语啦，今天的阅读材料很有趣哦！"
- **完成表扬**：任务完成返回时，AI老师播放表扬语音："太棒了！英语阅读完成得很好！"
- **超时提醒**：若当前时段已过但任务未开始，AI老师温和提醒："英语课时间快过啦，要不要现在开始？"
- **全部完成庆祝**：当日所有任务完成后，AI老师播放庆祝动画和语音："今天的任务全部完成啦！你真厉害！"

## 状态枚举

### 默认状态
- 时间线显示当日所有计划任务
- 当前时间指示器实时移动
- 已完成任务显示勾选状态
- 当前时段任务高亮展开
- 待完成任务正常显示

### 空状态
- 时间线为空，无任何任务卡片
- 中央显示空状态插图（AI老师翘着二郎腿休息的插画）
- 提示文案："今天没有学习安排，好好休息吧！"
- 显示"去看看其他日期"链接

### 加载状态
- 今日进度卡片显示占位符"--/--"
- 时间线区域显示3-4个骨架屏卡片
- 当前时间指示器正常显示

### 错误状态
- 显示错误提示"加载今日计划失败"
- 提供"重试"按钮
- 若有本地缓存则显示缓存数据并标注"离线数据"

### 边界情况
- **查看过去日期**：所有任务显示最终状态（完成/未完成/已跳过），不可操作，"开始学习"按钮变为"补学"（仍可开始学习）
- **查看未来日期**：所有任务显示计划状态，"开始学习"按钮为灰色禁用态，显示"还没到时间哦"
- **全部完成**：进度卡片显示"全部完成"，整体背景切换为庆祝主题色，AI老师显示庆祝表情
- **全部未完成（已过去）**：进度卡片显示红色警告，AI老师温和提醒"昨天的任务没来得及做，要不要现在补一下？"
- **家长查看模式**：家长模式下无"开始学习"按钮，仅查看完成状态，额外显示学习时长统计

## 导航关系

### 从哪来
- **C2 学习计划总览**：点击周视图中某一天的列区域或某个色块跳入，携带日期参数
- **B1 学生首页**：点击"今日学习"卡片直接进入当日详情

### 到哪去
- **D1 知识课堂**：点击数学/语文等学科任务的"开始学习"
- **D2 练习页**：点击练习类型任务的"开始学习"
- **D3 听力/口语页**：点击英语听力/口语任务的"开始学习"
- **D4 知识点详情页**：点击任务卡片中的具体知识点链接
- **C2 学习计划总览**：点击返回按钮回到周视图
